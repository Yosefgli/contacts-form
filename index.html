function startScanner() {
    // בדיקה אם המכשיר תומך ב-API של מצלמה
    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
        alert("הדפדפן שלך לא תומך בגישה למצלמה.");
        return;
    }

    // בקשת גישה למצלמה
    navigator.mediaDevices.getUserMedia({ video: true })
        .then((stream) => {
            // אם ההרשאה ניתנה, הפעל את Html5Qrcode
            const html5QrCode = new Html5Qrcode("reader");
            const config = { fps: 10, qrbox: { width: 250, height: 250 } };

            html5QrCode.start(
                { facingMode: "environment" }, // מצלמה אחורית
                config,
                (decodedText) => {
                    document.getElementById("result").innerText = `תוצאה: ${decodedText}`;
                    html5QrCode.stop(); // עצירת הסריקה לאחר תוצאה
                },
                (error) => {
                    console.warn(`שגיאה בסריקה: ${error}`);
                }
            ).catch((err) => {
                console.error("שגיאה באתחול Html5Qrcode:", err);
            });
        })
        .catch((err) => {
            // אם המשתמש דחה את הגישה או יש שגיאה
            console.error("שגיאה בגישה למצלמה:", err);
            alert("לא ניתן לפתוח את המצלמה. ודא שיש הרשאות מתאימות במכשיר ובדפדפן.");
        });
}
